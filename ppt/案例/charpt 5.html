<!DOCTYPE html>
<html>
<head>
	<title>charpt5 函数</title>
</head>
<body>
	<script>
		// 函数封装实现hello，world
		function fun1(val1, val2){
			console.log(val1+val2);
		}
		fun1('Hello ', 'World!');

		// 函数返回值
		function fun2(){
			return 5;
		}
		console.log(fun2());

		// 介绍arguments，根据函数参数处理不定长参数长度的业务逻辑
		function add(){
			if (arguments.length == 1){
				console.log(arguments[0]);
			}else if(arguments.length == 2){
				console.log(arguments[0]+arguments[1]);
			}else if(arguments.length == 3){
				console.log(arguments[0]+arguments[1]+arguments[2]);
			}else if(arguments.length == 4){
				console.log(arguments[0]+arguments[1]+arguments[2]+arguments[3]);
			}
		}
		add(10);
		add(10, 20);
		add(10, 20, 30);
		add(10, 20, 30, 40);


		// 理解函数作用域
		// 函数的块级作用域，只允许在函数内部访问，在函数外访问不到		
		function foo(){
			var x = 1;
			x = x + 1;
		}
		// console.log(x);

		// 闭包
		// 隐藏变量不被外部获取,如下面示例访问不到outFun内部的a变量，只有inFun能访问到
		function outFun(){
			var a = 0;
			return function inFun(){
				a++;
				console.log('a...', a);
			}
		}
		var func = outFun();

		class Base{
			isEmpty(param){
				if (typeof param == 'object' && param.length === undefined){
					//对象
					let len = Object.keys(param).length;
					if (len){
						console.log('此对象有多少项数据：', len);
					}else{
						console.log('此对象为空对象');
					}
				}else if(typeof param == 'object' && param.length !== undefined){
					if (param.length){
						console.log('此数组有多少项数据：', param.length);
					}else{
						console.log('此数组为空数组');
					}
				}
			}
		}

		class Util extends Base{
			constructor(params){
				super();
			}

			loadJs(){
				return new Promise((resolve, reject)=>{
					var js = document.createElement('script');
					js.onload = resolve;
					js.onerror = reject;
					js.src = './index1.js';
					document.body.append(js);
				})
			}

			loadCss(){
				return new Promise((resolve, reject)=>{
					var link = document.createElement('link');
					link.onload = resolve;
					link.onerror = reject;
	    			link.rel = "stylesheet";
	                link.type = "text/css";
					link.href = './index.css';
					document.body.append(link);	
				})
			}

			loadImg(){
				return new Promise((resolve, reject)=>{
					var img = new Image();
					img.onload = ()=>{
						resolve(img);
					}
					img.onerror = reject;
					img.src = './img3.jpg';
				})
			}

			async init(arr){
				let js = this.loadJs(arr[0]);
				console.log('js加载完毕');
				let css = this.loadJs(arr[1]);
				console.log('css加载完毕');
				let img = this.loadJs(arr[2]);
				console.log('img加载完毕');
				return img;
			}
		}
		var util = new Util();
		util.isEmpty([{a:1},{b:2}]);
		util.init(['./index.js', './index.css', './index.img']).
		then(res=>document.body.append(res));
	</script>

</body> 	 	
</html>